MEGHA OPERATING SYSTEM V2 - x86                                   THINGS TO DO
------------------------------------------------------------------------------

# TASKS                                         Estimated       Actual

[ ] Document BOOTINFO struct                  - 03 Feb 2021
[ ] Basic keyboard IRQ                        - 18 Nov 2020
    handler (demo)
[ ] RAMDISK (INITRD.0) creation
    in build.sh
[X] Physical memory allocator                 -
    [ ] Lock to protect the PAB.              -
[ ] Virutal memory allocator                  -
    [ ] How to do lazy allocation?
    [ ] Allocate a new virtual address
    [ ] Map a virtual to physical address
[ ] Various functions like kdisp_ioctl, etc   -
    must implement error reporting.
    [X] kdisp_ioctl
    Note: Afterthought: Is this a good idea?
    Calls or or any of its parameters to these
    functions come not from a human, but from
    other parts of the OS, any wrong argument
    getting to these functions means there
    is something wrong within the kernel code.
    We should fail fast the moment such
    conditions occur in the kernel.
[ ] Make symbols comply with the C99.         -                 30 Dec 2021
    Symbols beginning with underscore is
    reserved [7.13]. Rename them.
    [X] Macros in header files.
    [X] Variable names in C source.
    [X] Members in struct.
    [X] Function names.
    [ ] Guard Macros in header files.
[ ] Configuration header files for C and
    assembly.                                 -
    Note: This can be done using CMake.
[ ] Script to auto generate the config
    headers simultaneously for C and
    assembly.                                 -
    Note: This can be done using CMake, so
    separate script is not required.
[ ] There is a need to document the types
    declared for MeghaOS like INT, LONG etc.
    These do need to conform with C99, but
    can be different from the compiler
    versions. LONG for example must be 32
    bits or more, but always large enough
    to hold the largest addresses in the
    architecture.                             -
[-] Check the effect on kernel binary size,   -
    if the boot opaque types were removed.
    PMM or the Kernel accesses fields
    directly.
    I think these opaque types should remain,
    the accessor methods are a good place to
    place asserts and other checks. And these
    checks are invaluable in finding and
    preventing bugs.

[X] Page fault handler in asm                 - 26 Jan 2021    22 Mar 2023
    [-] Examine if EFLAGS register need to be
        preserved by interrupt and exception
        handlers.                             -
        - EFLAGS are preserved in the
          interrupt frame. Thus not a must.

[X] Use true, false from stdbool.h instead
    of macros defined in our types.h          -                 04 April 2023

[X] Remove the transparent union for PHYSICAL -                 19 Nov 2022
    Type matching must be rigid to be useful.

[X] Treat physical page 0 as a NULL page.     -                 19 Nov 2022
    PMM will never allocate this page and
    thus no Virtual Memory can be assigned
    to this page.
    This physical address will be treated
    as an invalid (out of range) address by
    both PMM and VMM. So can be helpful
        * To track down bugs, as any access
        to this address, means something is
        not properly initialized. Without
        this NULL page, such errors are
        hard to track down.
[X] Functions should return EXIT_SUCCESS,     -                 23 Nov 2022
    EXIT_FAILURE, on Success and Failure.
    Not ERR_NONE, on Success, and -1 on
    failure.
    Issue first seen in kdisp module.
[X] GP handler                                - 16 Nov 2020    22 Mar 2023
[X] Rename the accessor methods in boot.c to  - 11 Nov 2022     11 Nov 2022
    the following format:
    k<Boot Structure Name>_get<Field Name>
[X] GDT and LDT concept                       - 25 Aug 2020
[X] IDT and TSS read                          - 01 Sep 2020
[X] Test Protected mode entry                 - 03 Sep 2020
[X] x86 Cross compiler setup                  - 21 Oct 2020
[X] GDT.c                                     - 23 Oct 2020
[X] VGA text driver                           - 01 Nov 2020
[X] Header file structures                    - 01 Nov 2020
[X] mem.c                                     - 01 Nov 2020
[X] TSS                                       - 06 Nov 2020
[X] Jump to ring 3 (demo)                     - 06 Nov 2020
[X] IDT (demo)                                - 14 Nov 2020
[X] System calls demo (demo)                  - 14 Nov 2020
[X] DIV0 handler                              - 17 Nov 2020
[X] 32Bit Paging                              - 19 Dec 2020
[X] Identity Paging (demo)                    - 19 Dec 2020
[X] Page fault handler (demo)                 - 20 Dec 2020
[X] A way to pass information from            - 31 Dec 2020
    bootloader to the kernel                  
[X] Memory detection                          - 05 Jan 2021
[X] Check minumum memory in boo1              - 05 Jan 2021
[X] Document TSS for later                    - 17 Nov 2020     28 Jun 2021
[X] Document IDT for later                    - 30 Jun 2021     28 Jun 2021
[X] Document Call Gates                       - 30 Jun 2021     28 Jun 2021
[X] Document Paging                           - 24 Jul 2021     24 Jul 2021
[X] Higher half kernel implement              - 31 Jan 2021     28 Aug 2021
[X] BOOT1 to load Kernel and INITRD.0         -                 25 Aug 2021
[X] Create a tools folder, with scripts to    -
    build gcc cross-compiler.
[X] Idea of VERBOSE to print debug messages   -                 07 Sep 2021
    on screen is faulty. There should be
    options like
        DEBUG_ONSCREEN,
        DEBUG_E9, 
        DEBUG_SERIAL, 
        DEBUG_FILE.
    Correct option is selected based on 
    compiler flags and stage at which 
    the OS is currently.
[X] Create/Update the C style guide.          -                 29 Dec 2021
[-] Instead of just [ER], boot1 should show
    some error code, that identifies the
    failure.                                  -                 9 Han 2022 (see notes below)
    Note: Not done, because there is
    currently only one souce of error in
    each of the routimes. Specific error
    codes will not be benifitial at this
    time.

# LONG TERM PLANS

## 1. USE UEFI TOGETHER WITH LEGACY BIOS.
[ ] `LoadFile` routine in `boot0` to read from FAT32 not FAT12. 
    This is needed becuase UEFI boot disks must be formated in FAT32.
[ ] (Optional) A seek(..) type routine, so that we can load different parts of 
    file to memory. This comes handy to load the 
    INITRD (which could be > 64 KB). 
    
    This is optional becuase we can live without this routine, if we split our 
    INTRD in two parts. 1st part is smallest, which is loaded by `boo1`, it 
    contains the kernel and rest of the initial part of the OS. The rest will 
    be lumped together in the 2nd INITRD file.

    NOTE: Seek need not be a separate routine, we can just implement it inside 
    the `LoadFile` routine, and take a `start` location as argument.

# TODOs
 
[X] Can kernel global variables like errno, etc, lie in the kernel, or be 
    placed in the process struct, so that re-entrant kernel problems
    do not occour.
    - Each process has separate kernel data and kernel stack. 
      Thus no conflict, between processes.
[ ] Paging model considerations   - 12th Dec 2020
[X] Higher half kernel read       - 18th Dec 2020
[ ] Usermode application model    - 20th Dec 2020
[ ] UI model considerations       - 25th Dec 2020
[ ] Usermode, Kernel IPC model    - 25th Dec 2020

# READING

[ ] xv6 Book                      - 14th Nov 2020
    https://pdos.csail.mit.edu/6.828/2019/xv6/book-riscv-rev0.pdf 
[X] 8259 datasheet                - 12th Nov 2020
[ ] 820093 datasheet              - 15th Nov 2020
