set(KERNEL_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/disp.c
    ${CMAKE_CURRENT_SOURCE_DIR}/kmalloc.c
    ${CMAKE_CURRENT_SOURCE_DIR}/kstdlib.c
    ${CMAKE_CURRENT_SOURCE_DIR}/pmm.c
    ${CMAKE_CURRENT_SOURCE_DIR}/printk.c
    ${CMAKE_CURRENT_SOURCE_DIR}/salloc.c
    ${CMAKE_CURRENT_SOURCE_DIR}/vmm.c
    ${CMAKE_CURRENT_SOURCE_DIR}/handle.c
    )

    if (MOS_GRAPHICS_ENABLED)
        LIST(APPEND KERNEL_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/graphics.c)
        LIST(APPEND KERNEL_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/compositor.c)
    endif()

compile_lib(
    NAME kernel
    SOURCES ${KERNEL_SOURCES}
    FLAGS ${MOS_KERNEL_GCC_FLAGS}
    INCLUDE_DIRECTORIES ${MOS_KERNEL_GCC_INCLUDE_DIRS}
    )
